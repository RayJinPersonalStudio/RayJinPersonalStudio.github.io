<!doctype html>
<html>
 <head> 
  <meta charset="utf-8"> 
  <title>chat room demo</title> 
  <link rel="stylesheet" type="text/css" href="http://chatroom.bmob.cn/css/main.css">
   <script src="bmob-min.js"></script>

  
 </head> 
  
 <body> 
  <h1>chat room  </h1> 
  <div id="data"></div> 
  <div>
    昵称
   <input type="text" id="name"> 内容
   <input type="text" id="content"> 
   <button name="发送" id="send">发送 </button>
  </div> 
  <script type="text/javascript">
 
    function sendMsg(){

     
    Bmob.initialize("7e8ce97c90d7014bb2cc0e0a2e9b5260", "49b35cbc0308f74a39391c382d2c176a");
   
        var name= $("#name").val();
        var content = $("#content").val();

        if($.trim(name)==""){
            alert("昵称不能为空！");
            return;
        }

         if($.trim(content)==""){
            alert("内容不能为空！");
            return;
        }       

        var Chat = Bmob.Object.extend("Chat");
        var chat = new Chat();
        chat.set("name", $("#name").val());
        chat.set("content", $("#content").val());
        chat.save(null, {
          success: function(object) {           
           alert("发送成功");
          },
          error: function(model, error) {        
           alert("error");

          }
        });     
    }

    $("#send").click(function(){

        sendMsg();
    });

 
   $('#name').keydown(function(e) {
    if (e.keyCode === 13) {
      sendMsg();
    }
  });

  //通过“回车”提交聊天信息
   $('#content').keydown(function(e) {
    if (e.keyCode === 13) {
      sendMsg();
    }
  });
  </script>   
 </body>
</html>
